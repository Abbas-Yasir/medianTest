/******************************************************************************

                            Online C Compiler.
                Code, Compile, Run and Debug C program online.
Write your code in this editor and press "Run" button to compile and execute it.

*******************************************************************************/

#include <stdio.h>
#include <stdint.h>
#include <math.h>

#define itemType int

struct med_Datatype {
    itemType*  array;
    double elementNo;
    double med;
};

typedef struct med_Datatype med_Struct;

// int median(int* arr1,int m, int* arr2, int n);
med_Struct median(itemType* arr1,int m, itemType* arr2, int n)
{
    med_Struct med;
    double i    = (double)(m+1)/2-1;
    double j    = (double)(n+1)/2-1;
    double x    = (double)(m+n+1)/2-1;
    double pos= 0;
    int A;
    int B;
    int C;
    int count=0;

    // (floor(m/2+1)+floor(m/2+.5))/2

    double med1=(double)(arr1[(int)floor(i)]+arr1[(int)ceil(i)])/2;
    double med2=(double)(arr2[(int)floor(j)]+arr2[(int)ceil(j)])/2;
    printf("med1= %0.2f its index i= %0.2f \r\n",med1,i);
    printf("med2= %0.2f its index j= %0.2f\r\n",med2,j);
    printf("merged med index= %0.2f \r\n",x);

    if (med1==med2) { 
        med.array=arr1; med.elementNo=i; 
        med.med=(double)(med.array[(int)floor(med.elementNo)]+med.array[(int)ceil(med.elementNo)])/2;
        printf("med.elementNo= %0.2f \r\n",med.elementNo);
        printf("med1=med2= %0.2f \r\n*********\r\n",med.med);
        return med; 
    }
    else if (med1<med2)
    {
        A=0;
        C=(int)j;
        B=(int)(C+A)/2;
        printf("A=%u,B=%u,C=%u. \r\n",A,B,C);

        while(A!=C){
            if(med1<arr2[B]) {printf("med1<arr2[B] > > >");C=B;B=(int)(C+A)/2;}
            else {printf("med1>arr2[B] > > >");A=B; B=(int)(C+A)/2;}
            // else {printf("med1=arr2[B] > > > Breaking.\r\n");break;}
            if ( B==A ){printf("B=A > > > Breaking.\r\n");break;} // same as C=A+1
            printf("A=%u,B=%u,C=%u. \r\n",A,B,C);
        }
        if(med1<arr2[B]) {printf("med1<arr2[B] > > >");C=B;B=(int)(C+A)/2;}
        else {printf("med1>arr2[B] > > >");A=B; B=(int)(C+A)/2;}
        printf("A=%u,B=%u,C=%u. \r\n",A,B,C);
        printf("B=%u. \r\n",B);
        count=C;
        
        
        
        
        
        med.array=arr1; 
        med.elementNo=i;
        pos=i+count;

        pos=pos; 
        double R=x-pos;
        printf("Remaining= %0.2f \r\n",R);
        printf("pos= %0.2f \r\n",pos);
    }
    return med;
}

int main()
{
    itemType num1[] =   {1,2,3,5,10};
    itemType num2[] = {1,2,3,4,8,11,12};
    itemType m=sizeof(num1)/sizeof(num1[0]);
    itemType n=sizeof(num2)/sizeof(num2[0]);
    
    median(num1,m,num2,n);


    // printf("%u \r\n",m);
    return 0;
}


